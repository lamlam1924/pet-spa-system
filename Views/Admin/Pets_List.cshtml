@page
@{
    Layout = null; // Không dùng layout mặc định
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Admin dashboard for Paws & Claws Pet Shop">
    <meta name="author" content="indrijunanda">
    <link href="@Url.Content("~/imgAdmin/logo/pet-logo.png")" rel="icon">
    <title>petshop - Pet List</title>
    <link href="@Url.Content("~/vendorAdmin/fontawesome-free/css/all.min.css")" rel="stylesheet" type="text/css">
    <link href="@Url.Content("~/vendorAdmin/bootstrap/css/bootstrap.min.css")" rel="stylesheet" type="text/css">
    <!-- Xóa CDN Bootstrap 4.5.2 để tránh xung đột -->
    <link href="@Url.Content("~/cssAdmin/ruang-admin.min.css")" rel="stylesheet">
</head>
<body id="page-top">
    <div id="wrapper">
        <!-- Sidebar -->
        <ul class="navbar-nav sidebar sidebar-light accordion" id="accordionSidebar">
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="@Url.Content("~/Admin/Index")">
                <div class="sidebar-brand-icon">
                    <img src="@Url.Content("~/imgAdmin/logo/pet-logo.png")">
                </div>
                <div class="sidebar-brand-text mx-3">petshop - Dashboard</div>
            </a>
            <hr class="sidebar-divider my-0">
            <li class="nav-item">
                <a class="nav-link" href="@Url.Content("~/Admin/Index")">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <hr class="sidebar-divider">
            <div class="sidebar-heading">Management</div>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseServices" aria-expanded="true" aria-controls="collapseServices">
                    <i class="fas fa-fw fa-spa"></i>
                    <span>Services</span>
                </a>
                <div id="collapseServices" class="collapse" aria-labelledby="headingServices" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Service Management</h6>
                        <a class="collapse-item" href="services-list.html">List Services</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseStaff" aria-expanded="true" aria-controls="collapseStaff">
                    <i class="fas fa-fw fa-users"></i>
                    <span>Staff</span>
                </a>
                <div id="collapseStaff" class="collapse" aria-labelledby="headingStaff" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Staff Management</h6>
                        <a class="collapse-item" href="@Url.Content("~/Admin/Staff")">List Staff</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseCustomers" aria-expanded="true" aria-controls="collapseCustomers">
                    <i class="fas fa-fw fa-user-friends"></i>
                    <span>Customers</span>
                </a>
                <div id="collapseCustomers" class="collapse" aria-labelledby="headingCustomers" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Customer Management</h6>
                        <a class="collapse-item" href="@Url.Content("~/Admin/List_Customer")">List Customers</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePets" aria-expanded="true" aria-controls="collapsePets">
                    <i class="fas fa-fw fa-paw"></i>
                    <span>Pet Profiles</span>
                </a>
                <div id="collapsePets" class="collapse" aria-labelledby="headingPets" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Pet Management</h6>
                        <a class="collapse-item" href="@Url.Content("~/Admin/Pets_List")">List Pets</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseProducts" aria-expanded="true" aria-controls="collapseProducts">
                    <i class="fas fa-fw fa-shopping-cart"></i>
                    <span>Products</span>
                </a>
                <div id="collapseProducts" class="collapse" aria-labelledby="headingProducts" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Product Management</h6>
                        <a class="collapse-item" href="@Url.Content("~/Admin/Products_List")">List Products</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseAppointments" aria-expanded="true" aria-controls="collapseAppointments">
                    <i class="fas fa-fw fa-calendar-alt"></i>
                    <span>Appointments</span>
                </a>
                <div id="collapseAppointments" class="collapse" aria-labelledby="headingAppointments" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Appointment Management</h6>
                        <a class="collapse-item" href="@Url.Content("~/Admin/Appointments")">List Appointments</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePayments" aria-expanded="true" aria-controls="collapsePayments">
                    <i class="fas fa-fw fa-credit-card"></i>
                    <span>Payments</span>
                </a>
                <div id="collapsePayments" class="collapse" aria-labelledby="headingPayments" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Payment Management</h6>
                        <a class="collapse-item" href="@Url.Content("~/Admin/Payment")">List Payments</a>
                        <a class="collapse-item" href="@Url.Content("~/Admin/Refund")">Process Refund</a>
                    </div>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapsePromotions" aria-expanded="true" aria-controls="collapsePromotions">
                    <i class="fas fa-fw fa-tags"></i>
                    <span>Promotions</span>
                </a>
                <div id="collapsePromotions" class="collapse" aria-labelledby="headingPromotions" data-parent="#accordionSidebar">
                    <div class="bg-white py-2 collapse-inner rounded">
                        <h6 class="collapse-header">Promotion Management</h6>
                        <a class="collapse-item" href="@Url.Content("~/Admin/Promotions_List")">List Promotions</a>
                    </div>
                </div>
            </li>
            <hr class="sidebar-divider">
            <div class="sidebar-heading">Reports</div>
            <li class="nav-item">
                <a class="nav-link" href="statistics.html">
                    <i class="fas fa-fw fa-chart-area"></i>
                    <span>Statistics</span>
                </a>
            </li>
            <hr class="sidebar-divider">
            <div class="version" id="version-ruangadmin">Version 1.1</div>
        </ul>
        <!-- Sidebar -->
        <div id="content-wrapper" class="d-flex flex-column">
            <div id="content">
                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-navbar topbar mb-4 static-top">
                    <button id="sidebarToggleTop" class="btn btn-link rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="searchDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-search fa-fw"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in" aria-labelledby="searchDropdown">
                                <div class="input-group">
                                    <input type="text" id="searchPetInput" class="form-control bg-light border-1 small" placeholder="Search for pets..." aria-label="Search" aria-describedby="basic-addon2" style="border-color: #3f51b5;">
                                    <div class="input-group-append">
                                        <button class="btn btn-primary" type="button">
                                            <i class="fas fa-search fa-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item dropdown no-arrow mx-1">
                            <a class="nav-link dropdown-toggle" href="#" id="alertsDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-bell fa-fw"></i>
                                <span class="badge badge-danger badge-counter">3+</span>
                            </a>
                            <div class="dropdown-list dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="alertsDropdown">
                                <h6 class="dropdown-header">Alerts Center</h6>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="mr-3">
                                        <div class="icon-circle bg-primary">
                                            <i class="fas fa-file-alt text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="small text-gray-500">May 25, 2025</div>
                                        <span class="font-weight-bold">Monthly pet adoption report is ready!</span>
                                    </div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="mr-3">
                                        <div class="icon-circle bg-success">
                                            <i class="fas fa-donate text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="small text-gray-500">May 20, 2025</div>
                                        $500.00 from pet food sales deposited!
                                    </div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="mr-3">
                                        <div class="icon-circle bg-warning">
                                            <i class="fas fa-exclamation-triangle text-white"></i>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="small text-gray-500">May 15, 2025</div>
                                        Low stock alert: Cat litter running low!
                                    </div>
                                </a>
                                <a class="dropdown-item text-center small text-gray-500" href="#">Show All Alerts</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown no-arrow mx-1">
                            <a class="nav-link dropdown-toggle" href="#" id="messagesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-envelope fa-fw"></i>
                                <span class="badge badge-warning badge-counter">2</span>
                            </a>
                            <div class="dropdown-list dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="messagesDropdown">
                                <h6 class="dropdown-header">Message Center</h6>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="dropdown-list-image mr-3">
                                        <img class="rounded-circle" src="@Url.Content("~/imgAdmin/customer1.png")" style="max-width: 60px" alt="">
                                        <div class="status-indicator bg-success"></div>
                                    </div>
                                    <div class="font-weight-bold">
                                        <div class="text-truncate">Can you recommend a good dog food brand?</div>
                                        <div class="small text-gray-500">Buddy Bark · 1h</div>
                                    </div>
                                </a>
                                <a class="dropdown-item d-flex align-items-center" href="#">
                                    <div class="dropdown-list-image mr-3">
                                        <img class="rounded-circle" src="@Url.Content("~/imgAdmin/customer2.png")" style="max-width: 60px" alt="">
                                        <div class="status-indicator bg-default"></div>
                                    </div>
                                    <div>
                                        <div class="text-truncate">Do you offer grooming services for cats?</div>
                                        <div class="small text-gray-500">Whiskers Meow · 2d</div>
                                    </div>
                                </a>
                                <a class="dropdown-item text-center small text-gray-500" href="#">Read More Messages</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown no-arrow mx-1">
                            <a class="nav-link dropdown-toggle" href="#" id="tasksDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fas fa-tasks fa-fw"></i>
                                <span class="badge badge-success badge-counter">3</span>
                            </a>
                            <div class="dropdown-list dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="tasksDropdown">
                                <h6 class="dropdown-header">Tasks</h6>
                                <a class="dropdown-item align-items-center" href="#">
                                    <div class="mb-3">
                                        <div class="small text-gray-500">
                                            Restock Dog Toys
                                            <div class="small float-right"><b>50%</b></div>
                                        </div>
                                        <div class="progress" style="height: 12px;">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                </a>
                                <a class="dropdown-item align-items-center" href="#">
                                    <div class="mb-3">
                                        <div class="small text-gray-500">
                                            Update Pet Adoption Page
                                            <div class="small float-right"><b>30%</b></div>
                                        </div>
                                        <div class="progress" style="height: 12px;">
                                            <div class="progress-bar bg-warning" role="progressbar" style="width: 30%" aria-valuenow="30" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                </a>
                                <a class="dropdown-item align-items-center" href="#">
                                    <div class="mb-3">
                                        <div class="small text-gray-500">
                                            Create Sales Report
                                            <div class="small float-right"><b>75%</b></div>
                                        </div>
                                        <div class="progress" style="height: 12px;">
                                            <div class="progress-bar bg-danger" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                </a>
                                <a class="dropdown-item text-center small text-gray-500" href="#">View All Tasks</a>
                            </div>
                        </li>
                        <li>
                            <span class="topbar-divider d-none d-sm-block"></span>
                        </li>
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img class="imgAdmin-profile rounded-circle" src="@Url.Content("~/imgAdmin/staff.png")" style="max-width: 60px">
                                <span class="ml-2 d-none d-lg-inline text-white small">Paw Patrol</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Profile
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Settings
                                </a>
                                <a class="dropdown-item" href="#">
                                    <i class="fas fa-list fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Activity Log
                                </a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:void(0);" data-toggle="modal" data-target="#logoutModal">
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Logout
                                </a>
                            </div>
                        </li>
                    </ul>
                </nav>
                <!-- Topbar -->
                <!-- Container Fluid-->
                <div class="container-fluid" id="container-wrapper">
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-800">Pet List</h1>
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="@Url.Content("~/Admin/Index")">Home</a></li>
                            <li class="breadcrumb-item"><a href="@Url.Content("~/Admin/Pets_List")">Pet Profiles</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Pet List</li>
                        </ol>
                    </div>
                    <!-- Pet List Content -->
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card shadow">
                                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                    <h6 class="m-0 font-weight-bold text-primary">Pet Profiles</h6>
                                    <button id="btnAddPet" class="m-0 float-right btn btn-primary btn-sm" type="button">
                                        Add New Pet <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table align-items-center table-flush">
                                            <thead class="thead-light">
                                                <tr>
                                                    <th>Pet ID</th>
                                                    <th>Name</th>
                                                    <th>Species</th>
                                                    <th>Breed</th>
                                                    <th>Age</th>
                                                    <th>Gender</th>
                                                    <th>Owner</th>
                                                    <th>Created At</th>
                                                    <th>Action</th>
                                                </tr>
                                            </thead>
                                            <tbody id="petTableBody"></tbody>
                                        </table>
                                    </div>
                                    <!-- Phân trang -->
                                    <nav aria-label="Page navigation">
                                        <ul class="pagination justify-content-end" id="pagination"></ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- End Pet List Content -->
                    <!-- Modal Add Pet -->
                    <div class="modal fade" id="addPetModal" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <form id="addPetForm" class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Add New Pet</h5>
                                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <label for="add-pet-name" class="form-label">Name</label>
                                        <input type="text" id="add-pet-name" class="form-control" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="add-pet-species" class="form-label">Species</label>
                                        <select id="add-pet-species" class="form-control" required></select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="add-pet-breed" class="form-label">Breed</label>
                                        <input type="text" id="add-pet-breed" class="form-control" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="add-pet-age" class="form-label">Age</label>
                                        <input type="number" min="0" id="add-pet-age" class="form-control" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="add-pet-gender" class="form-label">Gender</label>
                                        <select id="add-pet-gender" class="form-control" required>
                                            <option value="">-- Select Gender --</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="add-pet-owner" class="form-label">Owner</label>
                                        <input type="text" id="add-pet-owner" class="form-control" required>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary">Add Pet</button>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Modal Edit Pet -->
                    <div class="modal fade" id="editPetModal" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <form id="editPetForm" class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Edit Pet</h5>
                                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    <input type="hidden" id="edit-pet-id">
                                    <div class="mb-3">
                                        <label for="edit-pet-name" class="form-label">Name</label>
                                        <input type="text" id="edit-pet-name" class="form-control" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="edit-pet-species" class="form-label">Species</label>
                                        <select id="edit-pet-species" class="form-control" required></select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="edit-pet-breed" class="form-label">Breed</label>
                                        <input type="text" id="edit-pet-breed" class="form-control" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="edit-pet-age" class="form-label">Age</label>
                                        <input type="number" min="0" id="edit-pet-age" class="form-control" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="edit-pet-gender" class="form-label">Gender</label>
                                        <select id="edit-pet-gender" class="form-control" required>
                                            <option value="">-- Select Gender --</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="edit-pet-owner" class="form-label">Owner</label>
                                        <input type="text" id="edit-pet-owner" class="form-control" required>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="submit" class="btn btn-primary">Save</button>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- Modal Delete Confirm -->
                    <div class="modal fade" id="deletePetModal" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Confirm Delete</h5>
                                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to delete this pet?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" id="confirmDeletePet">Delete</button>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Container Fluid-->
            </div>
        </div>
        <!-- Scroll to top -->
        <a class="scroll-to-top rounded" href="#page-top">
            <i class="fas fa-angle-up"></i>
        </a>
        <script src="@Url.Content("~/vendorAdmin/jquery/jquery.min.js")"></script>
        <script src="@Url.Content("~/vendorAdmin/bootstrap/js/bootstrap.bundle.min.js")"></script>
        <script src="@Url.Content("~/vendorAdmin/jquery-easing/jquery.easing.min.js")"></script>
        <script src="@Url.Content("~/jsAdmin/ruang-admin.min.js")"></script>
        <script>
            // Danh sách Species giả lập
            const speciesList = [
                { id: 1, name: "Cat" },
                { id: 2, name: "Dog" }
            ];

            // Dữ liệu mẫu pets (giả lập)
            let pets = [
                { petID: 1, name: "Fluffy", species: "Cat", breed: "Persian", age: 3, gender: "Female", owner: "John Doe", createdAt: "2025-05-26 08:00:00" },
                { petID: 2, name: "Max", species: "Dog", breed: "Golden Retriever", age: 5, gender: "Male", owner: "Alice Smith", createdAt: "2025-05-25 14:30:00" }
            ];

            // Cấu hình phân trang
            const itemsPerPage = 5; // Số thú cưng mỗi trang
            let currentPage = 1; // Trang hiện tại

            // Hàm đổ dữ liệu species vào dropdown
            function populateSpeciesDropdown(dropdownId) {
                const select = document.getElementById(dropdownId);
                select.innerHTML = '<option value="">-- Select Species --</option>';
                speciesList.forEach(sp => {
                    const option = document.createElement('option');
                    option.value = sp.name;
                    option.textContent = sp.name;
                    select.appendChild(option);
                });
            }

            // Hàm hiển thị danh sách pets lên bảng, hỗ trợ lọc và phân trang
            function renderPetTable(filteredPets = pets) {
                const tbody = document.getElementById('petTableBody');
                tbody.innerHTML = ''; // Xóa bảng cũ
                const start = (currentPage - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                const paginatedPets = filteredPets.slice(start, end);

                paginatedPets.forEach(pet => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `
                    <td>${pet.petID}</td> <!-- Xóa liên kết không cần thiết -->
                    <td>${pet.name}</td>
                    <td>${pet.species}</td>
                    <td>${pet.breed}</td>
                    <td>${pet.age}</td>
                    <td>${pet.gender}</td>
                    <td>${pet.owner}</td>
                    <td>${pet.createdAt}</td>
                    <td>
                      <button class="btn btn-sm btn-primary edit-pet-btn" data-id="${pet.petID}">Edit</button>
                      <button class="btn btn-sm btn-danger delete-pet-btn" data-id="${pet.petID}">Delete</button>
                    </td>
                  `;
                    tbody.appendChild(tr);
                });

                renderPagination(filteredPets); // Cập nhật phân trang
            }

            // Hàm hiển thị phân trang
            function renderPagination(filteredPets = pets) {
                const totalPages = Math.ceil(filteredPets.length / itemsPerPage);
                const pagination = document.getElementById('pagination');
                pagination.innerHTML = '';
                for (let i = 1; i <= totalPages; i++) {
                    pagination.innerHTML += `
                    <li class="page-item ${i === currentPage ? 'active' : ''}">
                      <a class="page-link" href="#" data-page="${i}">${i}</a>
                    </li>
                  `;
                }
                // Xử lý click nút phân trang
                document.querySelectorAll('.pagination a').forEach(link => {
                    link.addEventListener('click', e => {
                        e.preventDefault();
                        currentPage = parseInt(e.target.dataset.page);
                        renderPetTable();
                    });
                });
            }

            // Hàm validate form Add/Edit
            function validateForm(formId) {
                const form = document.getElementById(formId);
                const name = form.querySelector('[id$="-pet-name"]').value.trim();
                const species = form.querySelector('[id$="-pet-species"]').value;
                const breed = form.querySelector('[id$="-pet-breed"]').value.trim();
                const age = parseInt(form.querySelector('[id$="-pet-age"]').value);
                const gender = form.querySelector('[id$="-pet-gender"]').value;
                const owner = form.querySelector('[id$="-pet-owner"]').value.trim();

                if (!name || !species || !breed || !gender || !owner) {
                    alert('Please fill all required fields.');
                    return false;
                }
                if (isNaN(age) || age < 0) {
                    alert('Age must be a non-negative number.');
                    return false;
                }
                return { name, species, breed, age, gender, owner };
            }

            // Xử lý tìm kiếm thú cưng
                        document.getElementById('searchPetInput').addEventListener('input', function (e) {
              const query = e.target.value.toLowerCase().trim();
              const filteredPets = pets.filter(pet =>
                pet.petID.toString().includes(query) || // Tìm theo Pet ID
                pet.name.toLowerCase().includes(query) || // Tìm theo tên
                pet.breed.toLowerCase().includes(query) || // Tìm theo Breed
                pet.owner.toLowerCase().includes(query) // Tìm theo chủ sở hữu
              );
              renderPetTable(filteredPets);
            });

            // Xử lý các sự kiện click
            document.addEventListener('click', function (e) {
                // Mở modal Edit Pet
                if (e.target.classList.contains('edit-pet-btn')) {
                    const petID = parseInt(e.target.getAttribute('data-id'));
                    const pet = pets.find(p => p.petID === petID);
                    if (pet) {
                        document.getElementById('edit-pet-id').value = pet.petID;
                        document.getElementById('edit-pet-name').value = pet.name;
                        document.getElementById('edit-pet-species').value = pet.species;
                        document.getElementById('edit-pet-breed').value = pet.breed;
                        document.getElementById('edit-pet-age').value = pet.age;
                        document.getElementById('edit-pet-gender').value = pet.gender;
                        document.getElementById('edit-pet-owner').value = pet.owner;
                        const editModal = new bootstrap.Modal(document.getElementById('editPetModal'));
                        editModal.show();
                    } else {
                        alert('Pet not found!');
                    }
                }

                // Mở modal xác nhận xóa
                if (e.target.classList.contains('delete-pet-btn')) {
                    const petID = parseInt(e.target.getAttribute('data-id'));
                    const deleteModal = new bootstrap.Modal(document.getElementById('deletePetModal'));
                    deleteModal.show();
                    document.getElementById('confirmDeletePet').onclick = function () {
                        pets = pets.filter(p => p.petID !== petID);
                        renderPetTable();
                        alert('Pet deleted successfully!');
                        deleteModal.hide();
                    };
                }
            });

            // Xử lý submit form Add Pet
            document.getElementById('addPetForm').addEventListener('submit', function (e) {
                e.preventDefault();
                const validatedData = validateForm('addPetForm');
                if (!validatedData) return;

                const newID = pets.length > 0 ? Math.max(...pets.map(p => p.petID)) + 1 : 1;
                const newPet = {
                    petID: newID,
                    name: validatedData.name,
                    species: validatedData.species,
                    breed: validatedData.breed,
                    age: validatedData.age,
                    gender: validatedData.gender,
                    owner: validatedData.owner,
                    createdAt: new Date().toISOString().slice(0, 19).replace('T', ' ')
                };
                pets.push(newPet);
                renderPetTable();
                alert('Pet added successfully!');
                const addModalEl = document.getElementById('addPetModal');
                const addModal = bootstrap.Modal.getInstance(addModalEl);
                addModal.hide();
            });

            // Xử lý submit form Edit Pet
            document.getElementById('editPetForm').addEventListener('submit', function (e) {
                e.preventDefault();
                const validatedData = validateForm('editPetForm');
                if (!validatedData) return;

                const petID = parseInt(document.getElementById('edit-pet-id').value);
                const index = pets.findIndex(p => p.petID === petID);
                if (index !== -1) {
                    pets[index].name = validatedData.name;
                    pets[index].species = validatedData.species;
                    pets[index].breed = validatedData.breed;
                    pets[index].age = validatedData.age;
                    pets[index].gender = validatedData.gender;
                    pets[index].owner = validatedData.owner;
                    renderPetTable();
                    alert('Pet updated successfully!');
                    const editModalEl = document.getElementById('editPetModal');
                    const editModal = bootstrap.Modal.getInstance(editModalEl);
                    editModal.hide();
                } else {
                    alert('Pet not found!');
                }
            });

            // Xử lý mở modal Add Pet
            document.getElementById('btnAddPet').addEventListener('click', function () {
                document.getElementById('addPetForm').reset();
                const addModal = new bootstrap.Modal(document.getElementById('addPetModal'));
                addModal.show();
            });

            // Khởi tạo trang
            window.onload = function () {
                populateSpeciesDropdown('add-pet-species');
                populateSpeciesDropdown('edit-pet-species');
                renderPetTable();
            };
        </script>
</body>
</html>